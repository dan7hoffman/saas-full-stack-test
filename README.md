# SaaS Full-Stack Test

**Purpose**: Testbed monorepo for validating the 01-Scripts generator tooling.

## Structure

```
saas-full-stack-test/
â”œâ”€â”€ backend/            # Generated by 3-BackendGenerator
â”‚   â”œâ”€â”€ src/            # Express + TypeScript + Prisma
â”‚   â”œâ”€â”€ prisma/         # Database schema + migrations
â”‚   â”œâ”€â”€ tests/          # Jest integration tests
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ frontend/           # To be built iteratively (4-FrontendGenerator)
â”‚   â”œâ”€â”€ src/            # Angular 19 + Tailwind CSS
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ docker-compose.yml  # PostgreSQL + Redis + MailHog
â””â”€â”€ .env                # Environment configuration
```

## Workflow

This project serves as the **reference implementation** for:

1. **Backend Generator** (`01-Scripts/3-BackendGenerator`)
   - âœ… Already proven and stable
   - Used to generate `backend/` directory

2. **Frontend Generator** (`01-Scripts/4-FrontendGenerator`)
   - ðŸš§ Build frontend manually here first
   - Extract patterns to generator
   - Test generator output against this reference

## Development

### Backend

```bash
# Start infrastructure (PostgreSQL, Redis, MailHog)
docker-compose up -d

# Install and run backend
cd backend
npm install
npm run dev

# Backend runs at: http://localhost:3000
```

**Demo Users**:
- `admin@example.com` / `Admin123!@#$`
- `user@example.com` / `User123!@#$`

**MailHog UI**: http://localhost:8025

### Frontend

```bash
cd frontend
npm install
npm run dev

# Frontend runs at: http://localhost:4200
```

**Features**:
- âœ… Authentication (Login/Register/Logout)
- âœ… Dashboard with stats
- âœ… Financial tracking (Accounts & Balance Entry)
- âœ… Organization invitations with auto-registration
- âœ… CSRF token integration
- âœ… Signal-based reactivity

## Testing Strategy

### Full-Stack Integration
1. Start backend (`npm run dev` in `backend/`)
2. Start frontend (`npm run dev` in `frontend/`)
3. Test login flow end-to-end
4. Verify CSRF token handling
5. Verify session management

### Generator Validation
1. Make changes to this reference implementation
2. Extract patterns to generators
3. Generate NEW project with generators
4. Compare generated vs reference
5. Iterate until generators match reference quality

## Git Strategy

**Branches**:
- `main` - Stable reference implementation
- `feature/*` - Experimental features
- `generator-test/*` - Testing generator output

**Commits**:
- Backend changes: `feat(backend): ...`
- Frontend changes: `feat(frontend): ...`
- Full-stack changes: `feat: ...`

## CI/CD (Coming Soon)

Will include separate workflows for:
- `backend-ci.yml` - Backend tests + security scan
- `frontend-ci.yml` - Frontend tests + build
- `integration-test.yml` - Full-stack E2E tests

## Related Repositories

- **01-Scripts**: Generator tooling (https://github.com/.../01-Scripts)
- **Context**: `.claude/` in 01-Scripts repo

## Invitation System

The application includes a complete organization invitation system:

### Features
- âœ… **Send invitations** by email with role assignment (OWNER/ADMIN/MEMBER/VIEWER)
- âœ… **Email delivery** via MailHog (local) with invitation links
- âœ… **Auto-redirect**: Unauthenticated users go to register page
- âœ… **Email pre-fill**: Registration form pre-filled with invited email (readonly)
- âœ… **Auto-accept**: Invitation automatically accepted after registration
- âœ… **Status tracking**: PENDING, ACCEPTED, EXPIRED, REVOKED states
- âœ… **Token-based security**: SHA-256 hashed tokens with expiration
- âœ… **Revocation support**: Admins can revoke pending invitations

### User Flow
1. Admin sends invitation from `/invite/manage`
2. Invitee receives email with invitation link
3. Clicking link redirects to `/auth/register?inviteToken=xxx`
4. Email is pre-filled on registration form
5. After successful registration, invitation is auto-accepted
6. New user has immediate access to the organization

### Testing Invitations
1. Login as `admin@example.com`
2. Navigate to "Invite Members" on dashboard
3. Send invitation to any email
4. Check MailHog at http://localhost:8025 for email
5. Open invitation link in incognito window
6. Register with the pre-filled email
7. Verify user is added to "Admin Family" organization

---

**Status**: Backend complete âœ… | Frontend complete âœ…
**Next**: Extract frontend patterns to 4-FrontendGenerator
